@page "/Register"
@rendermode InteractiveServer
@using Blazored.LocalStorage
@using Blazored.LocalStorage.StorageOptions
@using NEA.Components.Layout
@using System.Threading.Tasks
@inject DatabaseService Db
@inject NavigationManager NavMenu

<PageTitle>Register </PageTitle>
<div class="content-container">
<h1>Register.</h1>
<div class="page-center">
<p> Please Register here to save your progress.</p>
<EditForm Model ="registerModel" OnValidSubmit="RegisterUser">
    <DataAnnotationsValidator />
    <ValidationSummary/>
<div class="register-input"
<InputText @bind-Value="registerModel.username" placeholder="Username"/>
<ValidationMessage For="@(()=> registerModel.Username)" />
</div>
<div class="register-input">
<InputText @bind-Value="registerModel.password" type="password" placeholder="Password"/>
<ValidationMessage For="@(()=> registerModel.Password)" />
</div>

<div class="register-buttons">
<button  class ="btn btn-primary"RegisterUser">Register</button>
<button  class ="btn btn-primary""Cancel">Cancel</button>
</div>
</EditForm>
<p>@error</p>
</div>
</div>
@code{

    [Inject] ILocalStorageService storageService { get; set;}
    private RegisterModel registerModel = new RegisterModel();
    private string error;
    private async Task RegisterUser(){
       var username = registerModel.Username.Trim();]
       var password = registerModel.Password.Trim();

        var success = await Db.RegisterUserAsync(username, password);
        if(success){
            var user = await Db.LoginUserAsync(username,password);
            if(user != null){
                await storageService.SetItemAsync("currentUser", user);
                NavMenu.NavigateTo("/");
                }
            else{
                error = "Invalid Login";
            
            }
            }
        else{
            error = "Registration failed";
        }
        }
    private void Cancel(){
        NavMenu.NavigateTo("/");
    }
}
<style>
.main{
    padding 2rem;
    background-color: var(--bg-main);

}
.page-content{
    background-color: var(--card-bg);
    padding: 3rem;
    border-radius:18px;
    max-width:780px;
    width: 100%;
    margin:4rem auto;
    box-shadow: 0 12px 30px rgba(0,0,0,0.08),
        inset 0 1px 0 rgba(255,255,255,0.6);

}
.page-center{
    min-height: 70vh;
    align-items:center;
    justify-content: center;
    padding: 1rem;
}
.content-container {
max-width: 850px;
margin: 2.5rem auto;
padding: 2.5rem;
border-radius: 24px;
background: var(--card-bg);
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
font-family: 'Inter', 'Segoe UI', sans-serif;
}


.content-container h1 {
margin: -2.5rem -2.5rem 2rem -2.5rem;
padding: 1.5rem 2.5rem;
background-color: var(--accent-primary);
color: #ffffff;
font-size: 1.6rem;
font-weight: 500;
border-top-left-radius: 24px;
border-top-right-radius: 24px;
}

.content-container p {
font-size: 1rem;
color: var(--text-muted);
margin-bottom: 1rem;
}
.register-input{
    width:100%;
    max-width:320px;
    padding:0.6rem;

}
.register-buttons{
    display: flex;
    gap:1rem;
    margin-top:0.5rem;

}
</style>